(window.webpackJsonpswapi=window.webpackJsonpswapi||[]).push([[0],{30:function(e,t,n){e.exports=n(44)},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),l=n(9),i=n(13),u=n(10),s=n(11),d=n(12),m=n(19),b=n(18),E=n(20),p=(n(39),function(e){var t=e.book,n=e.onAddedToCart,r=t.title,o=t.author,c=t.price,l=t.img;return a.a.createElement("div",{className:"book-list-item mb-3"},a.a.createElement("div",{className:"book-cover"},a.a.createElement("img",{src:l,alt:r})),a.a.createElement("div",{className:"book-details"},a.a.createElement("span",{className:"book-title"},r),a.a.createElement("div",{className:"book-author"},o),a.a.createElement("div",{className:"book-price"},"$",c),a.a.createElement("button",{onClick:n,className:"btn btn-info add-to-cart"},"Add to cart")))}),f=n(8),O=a.a.createContext(),h=O.Provider,k=O.Consumer,v=function(){return function(e){return function(t){return a.a.createElement(k,null,(function(n){return a.a.createElement(e,Object.assign({},t,{bookstoreService:n}))}))}}},y=function(e){return{type:"BOOKS_LOADED",payload:e}},g=function(){return{type:"BOOKS_REQUESTED"}},C=function(e){return{type:"BOOKS_ERROR",payload:e}},j=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},A=function(e){return{type:"BOOK_DELETED_FROM_CART",payload:e}},D=function(e){return{type:"BOOK_DECREASE_CART",payload:e}},w=(n(40),function(){return a.a.createElement("div",null,"loading...")}),N=function(){return a.a.createElement("div",null,"Error Fuck!!!")},T=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bookstoreService,n=e.booksLoaded,r=e.booksRequested,a=e.booksError;r(),t.getBooks().then((function(e){return n(e)})).catch((function(e){return a(e)}))}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.error,r=e.loading,o=e.bookAddedToCart;return n?a.a.createElement(N,null):r?a.a.createElement(w,null):a.a.createElement(R,{books:t,onAddedToCart:o})}}]),t}(r.Component),R=function(e){var t=e.books,n=e.onAddedToCart;return a.a.createElement("ul",{className:"book-list"},t.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(p,{onAddedToCart:function(){return n(e.id)},book:e}))})))},L=v()(Object(l.b)((function(e){return{books:e.bookList.books,loading:e.bookList.loading,error:e.bookList.error}}),(function(e){return Object(f.a)({booksLoaded:y,booksRequested:g,booksError:C,bookAddedToCart:j},e)}))(T)),S=function(){return a.a.createElement(L,null)},K=(n(41),Object(l.b)((function(e){return{items:e.shoppingCart.cartItems,total:e.shoppingCart.orderTotal}}),(function(e){return Object(f.a)({bookDeletedFromCart:A,bookAddedToCart:j,bookDecreaseCart:D},e)}))((function(e){var t=e.items,n=e.total,r=e.bookAddedToCart,o=e.bookDecreaseCart,c=e.bookDeletedFromCart;return a.a.createElement("div",{className:"shopping-cart-table"},a.a.createElement("h2",null,"Your Order"),a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"#"),a.a.createElement("th",null,"Title"),a.a.createElement("th",null,"Count"),a.a.createElement("th",null,"Price"),a.a.createElement("th",null,"Action"))),a.a.createElement("tbody",null,t.map((function(e,t){return function(e,t){var n=e.id,l=e.title,i=e.count,u=e.total;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t+1),a.a.createElement("td",null,l),a.a.createElement("td",null,i),a.a.createElement("td",null,"$",u),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return r(n)},className:"btn btn-outline-success"},a.a.createElement("i",{className:"fa fa-plus-circle"})),a.a.createElement("button",{onClick:function(){return c(n)},className:"btn btn-outline-danger"},a.a.createElement("i",{className:"fa fa-trash-o"})),a.a.createElement("button",{onClick:function(){return o(n)},className:"btn btn-outline-warning"},a.a.createElement("i",{className:"fa fa-minus-circle"}))))}(e,t)})))),a.a.createElement("div",{className:"total"},"Total: $",n))}))),_=function(){return a.a.createElement(K,null)},P=(n(42),function(e){var t=e.numItems,n=e.total;return a.a.createElement("header",{className:"shop-header mb-3"},a.a.createElement(i.b,{to:"/",className:"logo text-dark"},"ReStore"),a.a.createElement(i.b,{to:"/cart"},a.a.createElement("i",{className:"icon-cart fa fa-shopping-cart"}),t," items ($",n,")"))}),B=Object(l.b)((function(e){return{numItems:e.shoppingCart.cartItems.length,total:e.shoppingCart.orderTotal}}))((function(e){var t=e.numItems,n=e.total;return a.a.createElement("main",{className:"container",role:"main"},a.a.createElement(P,{numItems:t,total:n}),a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",component:S,exact:!0}),a.a.createElement(u.a,{path:"/cart",component:_})))})),I=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},n}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(N,null):this.props.children}}]),t}(r.Component),X=function(){function e(){Object(s.a)(this,e),this.data=[{id:1,title:"Metro 2033",author:"Dmitriy Gluhovskiy",price:3.36,img:"https://d1b14unh5d6w7g.cloudfront.net/3453529685.01.S001.LXXXXXXX.jpg?Expires=1570540167&Signature=Hc4gX398+fIhXbJWHETc3qw5qh0ND/f+xeoedLHEong2wsAHN8vWv01W3NVJVtKxQB38FrM084mOe5lC4MKmGgoiYpgL+/sr9EdwmRNLJ3t4/efkjR1lKmxVQMr6Cic9eKMRXBLFm1hN7VcQeY5wKaClLuRU9tqyqy+ZkN78GXQ=&Key-Pair-Id=APKAIUO27P366FGALUMQ"},{id:2,title:"Metro 2034",author:"Dmitriy Gluhovskiy",price:3.99,img:"https://d1b14unh5d6w7g.cloudfront.net/3453316312.01.S001.LXXXXXXX.jpg?Expires=1570540260&Signature=DftYhP8Nx1E3MA7myP5hGr6+OaRDIO8tKhEYoBoES+AAvt+jFwznoABPV8M1j6YmerVGESA19inWhpPqcQqHY5pwrEarb1kzsD0uKLDa4rU5FN4xX158/eIDmJ9nUL/eMAw5cZFA/HooACnvdbeGZpJQeyWjqLp2MbwplDvkhAw=&Key-Pair-Id=APKAIUO27P366FGALUMQ"}]}return Object(d.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){Math.random()>.75?n(new Error("Something bad!!!")):t(e.data)}),700)}))}}]),e}(),M=n(29);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(M.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e,t){if(void 0===e)return{books:[],loading:!0,error:null};switch(t.type){case"BOOKS_REQUESTED":return F({},e,{books:[],loading:!0,error:null});case"BOOKS_LOADED":return F({},e,{books:t.payload,loading:!1,error:null});case"BOOKS_ERROR":return F({},e,{books:[],loading:!1,error:t.payload});default:return e.bookList}},q=n(14),G=function(e){var t=0,n=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){t+=o.value.total}}catch(l){r=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return t},U=function(e,t,n){var r=e.bookList.books,a=e.shoppingCart.cartItems,o=r.find((function(e){return t===e.id})),c=a.findIndex((function(e){return e.id===o.id})),l=a[c],i=function(e,t,n){return 0===t.count?[].concat(Object(q.a)(e.slice(0,n)),Object(q.a)(e.slice(n+1))):-1===n?[].concat(Object(q.a)(e),[t]):[].concat(Object(q.a)(e.slice(0,n)),[t],Object(q.a)(e.slice(n+1)))}(a,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.id,a=void 0===r?e.id:r,o=t.count,c=void 0===o?0:o,l=t.title,i=void 0===l?e.title:l,u=t.total,s=void 0===u?0:u;return{id:a,title:i,count:c+n,total:+(s+n*e.price).toFixed(2)}}(o,l,n),c);return{cartItems:i,orderTotal:G(i)}},J=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return U(e,t.payload,1);case"BOOK_DECREASE_CART":return U(e,t.payload,-1);case"BOOK_DELETED_FROM_CART":var n=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return U(e,t.payload,-n.count);default:return e.shoppingCart}},Y=function(e,t){return{bookList:Q(e,t),shoppingCart:J(e,t)}},H=Object(f.b)(Y),V=new X;c.a.render(a.a.createElement(l.a,{store:H},a.a.createElement(I,null,a.a.createElement(h,{value:V},a.a.createElement(i.a,null,a.a.createElement(B,null))))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.fab17021.chunk.js.map