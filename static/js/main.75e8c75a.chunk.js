(window.webpackJsonpswapi=window.webpackJsonpswapi||[]).push([[0],{30:function(e,t,r){e.exports=r(45)},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(19),c=r.n(o),i=r(5),l=r(15),u=r(13),s=r(4),m=function(e){return{type:"BOOKS_LOADED",payload:e}},d=function(){return{type:"BOOKS_REQUESTED"}},b=function(e){return{type:"BOOKS_ERROR",payload:e}},f=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},p=function(e){return{type:"BOOK_DELETED_FROM_CART",payload:e}},h=function(e){return{type:"BOOK_DECREASE_CART",payload:e}},E=function(e){return{type:"FORM_SUBMIT_SEARCH_TERM",payload:e}},O=function(e){return{type:"CHECKBOX_CHANGE_STATUS",payload:e}},g=(r(39),function(e,t,r){t(r)}),k=Object(i.b)((function(e){return{categories:e.filter.categories}}),(function(e){return Object(s.a)({checkboxChangeStatus:O},e)}))((function(e){var t=e.categories,r=e.checkboxChangeStatus;return a.a.createElement("ul",{className:"col-12 col-lg-3 list-group genres"},t.map((function(e,t){var n=e.id,o=e.label,c=e.name,i=e.checked;return a.a.createElement("li",{key:t,className:"list-group-item genres-item"},a.a.createElement("div",{className:"form-check"},a.a.createElement("input",{className:"form-check-input",type:"checkbox",value:c,id:c,onChange:function(e){return g(e,r,n)},checked:i}),a.a.createElement("div",{className:"check-indicator"}),a.a.createElement("label",{className:"form-check-label",htmlFor:c},o)))})))})),y=r(11),v=r(12),C=r(16),j=r(14),T=r(17),S=(r(40),function(e){var t=e.book,r=e.onAddedToCart,n=t.title,o=t.author,c=t.price,i=t.img;return a.a.createElement("div",{className:"book-list-item mb-3"},a.a.createElement("div",{className:"book-cover"},a.a.createElement("img",{src:i,alt:n})),a.a.createElement("div",{className:"book-details"},a.a.createElement("span",{className:"book-title"},n),a.a.createElement("div",{className:"book-author"},o),a.a.createElement("div",{className:"book-price"},"$",c),a.a.createElement("button",{onClick:r,className:"btn btn-info add-to-cart"},"Add to cart")))}),N=a.a.createContext(),D=N.Provider,_=N.Consumer,w=function(){return function(e){return function(t){return a.a.createElement(_,null,(function(r){return a.a.createElement(e,Object.assign({},t,{bookstoreService:r}))}))}}},A=(r(41),function(){return a.a.createElement("div",null,"loading...")}),R=function(){return a.a.createElement("div",null,"Error Fuck!!!")},P=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bookstoreService,r=e.booksLoaded,n=e.booksRequested,a=e.booksError;n(),t.getBooks().then((function(e){return r(e)})).catch((function(e){return a(e)}))}},{key:"render",value:function(){var e=this.props,t=e.books,r=e.error,n=e.loading,o=e.bookAddedToCart,c=(e.searchTerm,e.checkedCategories);console.log(c);var i=I(t,c);return r?a.a.createElement(R,null):n?a.a.createElement(A,null):a.a.createElement(B,{books:i,onAddedToCart:o})}}]),t}(n.Component),B=function(e){var t=e.books,r=e.onAddedToCart;return a.a.createElement("ul",{className:"row col-12 col-lg-9 book-list"},t.map((function(e){return a.a.createElement("li",{className:"col-6 col-sm-3",key:e.id},a.a.createElement(S,{onAddedToCart:function(){return r(e.id)},book:e}))})))},I=function(e,t){return 0===t.length?e:e.filter((function(e){var r=e.category;return t.some((function(e){var t=e.name;return r===t}))}))},K=w()(Object(i.b)((function(e){return{books:e.bookList.books,loading:e.bookList.loading,error:e.bookList.error,searchTerm:e.filter.searchTerm,checkedCategories:e.filter.checkedCategories}}),(function(e){return Object(s.a)({booksLoaded:m,booksRequested:d,booksError:b,bookAddedToCart:f},e)}))(P)),M=function(){return a.a.createElement("div",{className:"row"},a.a.createElement(k,null),a.a.createElement(K,null))},L=(r(42),Object(i.b)((function(e){return{items:e.shoppingCart.cartItems,total:e.shoppingCart.orderTotal}}),(function(e){return Object(s.a)({bookDeletedFromCart:p,bookAddedToCart:f,bookDecreaseCart:h},e)}))((function(e){var t=e.items,r=e.total,n=e.bookAddedToCart,o=e.bookDecreaseCart,c=e.bookDeletedFromCart;return a.a.createElement("div",{className:"shopping-cart-table"},a.a.createElement("h2",null,"Your Order"),a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"#"),a.a.createElement("th",null,"Title"),a.a.createElement("th",null,"Count"),a.a.createElement("th",null,"Price"),a.a.createElement("th",null,"Action"))),a.a.createElement("tbody",null,t.map((function(e,t){return function(e,t){var r=e.id,i=e.title,l=e.count,u=e.total;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t+1),a.a.createElement("td",null,i),a.a.createElement("td",null,l),a.a.createElement("td",null,"$",u),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return n(r)},className:"btn btn-outline-success"},a.a.createElement("i",{className:"fa fa-plus-circle"})),a.a.createElement("button",{onClick:function(){return c(r)},className:"btn btn-outline-danger"},a.a.createElement("i",{className:"fa fa-trash-o"})),a.a.createElement("button",{onClick:function(){return o(r)},className:"btn btn-outline-warning"},a.a.createElement("i",{className:"fa fa-minus-circle"}))))}(e,t)})))),a.a.createElement("div",{className:"total"},"Total: $",r))}))),x=function(){return a.a.createElement(L,null)},F=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(C.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a)))).state={searchTerm:""},r.onChangeTerm=function(e){r.setState({searchTerm:e.target.value})},r.onSubmit=function(e){var t=r.props.formSubmitSearchTerm;e.preventDefault(),t(r.state.searchTerm)},r}return Object(T.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return a.a.createElement(H,{onSubmit:this.onSubmit,onChangeTerm:this.onChangeTerm,searchTerm:this.state.searchTerm,disableSubmit:this.state.disableSubmit})}}]),t}(n.Component),H=function(e){var t=e.onSubmit,r=e.onChangeTerm,n=e.searchTerm;e.disableSubmit;return a.a.createElement("form",{className:"col-12 col-md-6",onSubmit:t},a.a.createElement("div",{className:"input-group"},a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search",onChange:r,value:n}),a.a.createElement("div",{className:"input-group-append"},a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Search"))))},U=Object(i.b)((function(e){return{}}),(function(e){return Object(s.a)({formSubmitSearchTerm:E},e)}))(F),G=(r(43),function(e){var t=e.numItems,r=e.total;return a.a.createElement("header",{className:"row shop-header mb-3"},a.a.createElement(l.b,{to:"/",className:"col-12 col-md-3 logo text-dark"},"ReStore"),a.a.createElement(U,null),a.a.createElement(l.b,{to:"/cart"},a.a.createElement("i",{className:"col-12 col-md-3 icon-cart fa fa-shopping-cart"}),t," items ($",r,")"))}),$=Object(i.b)((function(e){return{numItems:e.shoppingCart.cartItems.length,total:e.shoppingCart.orderTotal}}))((function(e){var t=e.numItems,r=e.total;return a.a.createElement("main",{className:"container",role:"main"},a.a.createElement(G,{numItems:t,total:r}),a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",component:M,exact:!0}),a.a.createElement(u.a,{path:"/cart",component:x})))})),q=function(e){function t(){var e,r;Object(y.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(C.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},r}return Object(T.a)(t,e),Object(v.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(R,null):this.props.children}}]),t}(n.Component),J=function(){function e(){Object(y.a)(this,e),this.data=[{id:1,title:"Metro 2033",author:"Dmitriy Gluhovskiy",price:3.36,category:"fantasy",img:"https://images2.medimops.eu/product/7a56c9/M03453529685-source.jpg"},{id:2,title:"Metro 2034",author:"Dmitriy Gluhovskiy",price:3.99,category:"post-apocalyptic",img:"https://images2.medimops.eu/product/230384/M03453316312-source.jpg"}]}return Object(v.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,r){setTimeout((function(){t(e.data)}),700)}))}}]),e}(),Q=r(21);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(r,!0).forEach((function(t){Object(Q.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=function(e,t){if(void 0===e)return{books:[],loading:!0,error:null};switch(t.type){case"BOOKS_REQUESTED":return Y({},e,{books:[],loading:!0,error:null});case"BOOKS_LOADED":return Y({},e,{books:t.payload,loading:!1,error:null});case"BOOKS_ERROR":return Y({},e,{books:[],loading:!1,error:t.payload});default:return e.bookList}},V=r(10),W=function(e,t,r){var n=e.bookList.books,a=e.shoppingCart.cartItems,o=n.find((function(e){return t===e.id})),c=a.findIndex((function(e){return e.id===o.id})),i=a[c],l=function(e,t,r){return 0===t.count?[].concat(Object(V.a)(e.slice(0,r)),Object(V.a)(e.slice(r+1))):-1===r?[].concat(Object(V.a)(e),[t]):[].concat(Object(V.a)(e.slice(0,r)),[t],Object(V.a)(e.slice(r+1)))}(a,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=t.id,a=void 0===n?e.id:n,o=t.count,c=void 0===o?0:o,i=t.title,l=void 0===i?e.title:i,u=t.total,s=void 0===u?0:u;return{id:a,title:l,count:c+r,total:+(s+r*e.price).toFixed(2)}}(o,i,r),c);return{cartItems:l,orderTotal:l.map((function(e){return e.total})).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+t}),0)}},Z=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return W(e,t.payload,1);case"BOOK_DECREASE_CART":return W(e,t.payload,-1);case"BOOK_DELETED_FROM_CART":var r=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return W(e,t.payload,-r.count);default:return e.shoppingCart}};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(r,!0).forEach((function(t){Object(Q.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=function(e,t){var r=e.filter.categories,n=r.findIndex((function(e){return e.id===t})),a=ne(r,n);return te({},e.filter,{categories:a,checkedCategories:ae(a)})},ne=function(e,t){var r=e[t],n=te({},r,{checked:!r.checked});return[].concat(Object(V.a)(e.slice(0,t)),[n],Object(V.a)(e.slice(t+1)))},ae=function(e){return e.filter((function(e){return!0===e.checked})).map((function(e){return{id:e.id,name:e.name}}))},oe=function(e,t){if(void 0===e)return{searchTerm:"",categories:[{id:1,label:"Post-apocalyptic",name:"post-apocalyptic",checked:!1},{id:2,label:"Fantasy",name:"fantasy",checked:!1},{id:3,label:"Horror",name:"horror",checked:!1}],checkedCategories:[]};switch(t.type){case"FORM_SUBMIT_SEARCH_TERM":return te({},e.filter,{searchTerm:t.payload});case"CHECKBOX_CHANGE_STATUS":return re(e,t.payload);default:return e.filter}},ce=function(e,t){return{bookList:z(e,t),shoppingCart:Z(e,t),filter:oe(e,t)}},ie=Object(s.b)(ce),le=new J;c.a.render(a.a.createElement(i.a,{store:ie},a.a.createElement(q,null,a.a.createElement(D,{value:le},a.a.createElement(l.a,null,a.a.createElement($,null))))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.75e8c75a.chunk.js.map