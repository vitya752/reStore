(window.webpackJsonpswapi=window.webpackJsonpswapi||[]).push([[0],{33:function(e,t,r){e.exports=r(50)},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},50:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(21),o=r.n(c),i=r(3),l=r(16),u=r(14),s=r(2),m=function(e){return{type:"BOOKS_LOADED",payload:e}},d=function(){return{type:"BOOKS_REQUESTED"}},f=function(e){return{type:"BOOKS_ERROR",payload:e}},b=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},p=function(e){return{type:"BOOK_DELETED_FROM_CART",payload:e}},E=function(e){return{type:"BOOK_DECREASE_CART",payload:e}},h=function(e){return{type:"FORM_SUBMIT_SEARCH_TERM",payload:e}},O=function(e){return{type:"CHECKBOX_CHANGE_STATUS",payload:e}},g=function(e){return{type:"MAXPRICE_CHANGE_VALUE",payload:e}},k=(r(42),function(e,t,r){t(r)}),v=Object(i.b)((function(e){return{categories:e.filter.categories}}),(function(e){return Object(s.a)({checkboxChangeStatus:O},e)}))((function(e){var t=e.categories,r=e.checkboxChangeStatus;return a.a.createElement("div",{className:"filter mb-3"},a.a.createElement("span",{className:"name-filter"},"Genres"),a.a.createElement("ul",{className:"list-group genres mb-3"},t.map((function(e,t){var n=e.id,c=e.label,o=e.name,i=e.checked;return a.a.createElement("li",{key:t,className:"list-group-item genres-item"},a.a.createElement("div",{className:"form-check"},a.a.createElement("input",{className:"form-check-input",type:"checkbox",value:o,id:o,onChange:function(e){return k(e,r,n)},checked:i}),a.a.createElement("div",{className:"check-indicator"}),a.a.createElement("label",{className:"form-check-label",htmlFor:o},c)))}))))})),y=r(32),C=(r(43),Object(i.b)((function(e){return{maxPrice:e.filter.maxPrice}}),(function(e){return Object(s.a)({maxPriceChangeValue:g},e)}))((function(e){var t=e.maxPrice,r=e.maxPriceChangeValue;return a.a.createElement("div",{className:"filter mb-3"},a.a.createElement("span",{className:"name-filter"},"Max price: $",t),a.a.createElement(y.a,{xmax:300,className:"price-filter",axis:"x",x:t,onChange:function(e){var t=e.x;return r(t)}}))}))),j=(r(44),function(){return a.a.createElement(n.Fragment,null,a.a.createElement(v,null),a.a.createElement(C,null))}),T=r(12),N=r(13),S=r(17),A=r(15),_=r(18),D=(r(45),function(e){var t=e.book,r=e.onAddedToCart,n=t.title,c=t.author,o=t.price,i=t.img;return a.a.createElement("div",{className:"book-list-item mb-3"},a.a.createElement("div",{className:"book-cover"},a.a.createElement("img",{src:i,alt:n})),a.a.createElement("div",{className:"book-details"},a.a.createElement("span",{className:"book-title"},n),a.a.createElement("div",{className:"book-author"},c),a.a.createElement("div",{className:"book-price"},"$",o),a.a.createElement("button",{onClick:r,className:"btn btn-info add-to-cart"},"Add to cart")))}),w=a.a.createContext(),P=w.Provider,R=w.Consumer,x=function(){return function(e){return function(t){return a.a.createElement(R,null,(function(r){return a.a.createElement(e,Object.assign({},t,{bookstoreService:r}))}))}}},B=(r(46),function(){return a.a.createElement("div",null,"loading...")}),I=function(){return a.a.createElement("div",null,"Error Fuck!!!")},L=function(e){function t(){return Object(T.a)(this,t),Object(S.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bookstoreService,r=e.booksLoaded,n=e.booksRequested,a=e.booksError;n(),t.getBooks().then((function(e){return r(e)})).catch((function(e){return a(e)}))}},{key:"render",value:function(){var e=this.props,t=e.books,r=e.error,n=e.loading,c=e.bookAddedToCart,o=e.searchTerm,i=e.checkedCategories,l=e.maxPrice,u=K(F(H(t,l),i,l),o);return r?a.a.createElement(I,null):n?a.a.createElement(B,null):a.a.createElement(M,{books:u,onAddedToCart:c})}}]),t}(n.Component),M=function(e){var t=e.books,r=e.onAddedToCart;return a.a.createElement("ul",{className:"row book-list"},t.map((function(e){return a.a.createElement("li",{className:"col-6 col-sm-3",key:e.id},a.a.createElement(D,{onAddedToCart:function(){return r(e.id)},book:e}))})))},K=function(e,t){return 0===t.length?e:e.filter((function(e){return!1!==e.title.toLowerCase().includes(t.toLowerCase())}))},F=function(e,t){return 0===t.length?e:e.filter((function(e){var r=e.category;return t.some((function(e){var t=e.name;return r===t}))}))},H=function(e,t){return 0===t?e:e.filter((function(e){return e.price<=t}))},U=x()(Object(i.b)((function(e){return{books:e.bookList.books,loading:e.bookList.loading,error:e.bookList.error,searchTerm:e.filter.searchTerm,checkedCategories:e.filter.checkedCategories,maxPrice:e.filter.maxPrice}}),(function(e){return Object(s.a)({booksLoaded:m,booksRequested:d,booksError:f,bookAddedToCart:b},e)}))(L)),G=function(){return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 col-lg-3"},a.a.createElement(j,null)),a.a.createElement("div",{className:"col-12 col-lg-9"},a.a.createElement(U,null)))},$=(r(47),Object(i.b)((function(e){return{items:e.shoppingCart.cartItems,total:e.shoppingCart.orderTotal}}),(function(e){return Object(s.a)({bookDeletedFromCart:p,bookAddedToCart:b,bookDecreaseCart:E},e)}))((function(e){var t=e.items,r=e.total,n=e.bookAddedToCart,c=e.bookDecreaseCart,o=e.bookDeletedFromCart;return a.a.createElement("div",{className:"shopping-cart-table"},a.a.createElement("h2",null,"Your Order"),a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"#"),a.a.createElement("th",null,"Title"),a.a.createElement("th",null,"Count"),a.a.createElement("th",null,"Price"),a.a.createElement("th",null,"Action"))),a.a.createElement("tbody",null,t.map((function(e,t){return function(e,t){var r=e.id,i=e.title,l=e.count,u=e.total;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t+1),a.a.createElement("td",null,i),a.a.createElement("td",null,l),a.a.createElement("td",null,"$",u),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return n(r)},className:"btn btn-outline-success"},a.a.createElement("i",{className:"fa fa-plus-circle"})),a.a.createElement("button",{onClick:function(){return o(r)},className:"btn btn-outline-danger"},a.a.createElement("i",{className:"fa fa-trash-o"})),a.a.createElement("button",{onClick:function(){return c(r)},className:"btn btn-outline-warning"},a.a.createElement("i",{className:"fa fa-minus-circle"}))))}(e,t)})))),a.a.createElement("div",{className:"total"},"Total: $",r))}))),V=function(){return a.a.createElement($,null)},X=function(e){function t(){var e,r;Object(T.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(S.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(a)))).state={searchTerm:""},r.onChangeTerm=function(e){r.setState({searchTerm:e.target.value})},r.onSubmit=function(e){var t=r.props.formSubmitSearchTerm;e.preventDefault(),t(r.state.searchTerm)},r}return Object(_.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return a.a.createElement(q,{onSubmit:this.onSubmit,onChangeTerm:this.onChangeTerm,searchTerm:this.state.searchTerm,disableSubmit:this.state.disableSubmit})}}]),t}(n.Component),q=function(e){var t=e.onSubmit,r=e.onChangeTerm,n=e.searchTerm;e.disableSubmit;return a.a.createElement("form",{className:"col-12 col-md-6",onSubmit:t},a.a.createElement("div",{className:"input-group"},a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search",onChange:r,value:n}),a.a.createElement("div",{className:"input-group-append"},a.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Search"))))},J=Object(i.b)((function(e){return{}}),(function(e){return Object(s.a)({formSubmitSearchTerm:h},e)}))(X),Q=(r(48),function(e){var t=e.numItems,r=e.total;return a.a.createElement("header",{className:"row shop-header mb-3"},a.a.createElement(l.b,{to:"/",className:"col-12 col-md-3 logo text-dark"},"ReStore"),a.a.createElement(J,null),a.a.createElement(l.b,{to:"/cart"},a.a.createElement("i",{className:"col-12 col-md-3 icon-cart fa fa-shopping-cart"}),t," items ($",r,")"))}),Y=Object(i.b)((function(e){return{numItems:e.shoppingCart.cartItems.length,total:e.shoppingCart.orderTotal}}))((function(e){var t=e.numItems,r=e.total;return a.a.createElement("main",{className:"container",role:"main"},a.a.createElement(Q,{numItems:t,total:r}),a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",component:G,exact:!0}),a.a.createElement(u.a,{path:"/cart",component:V})))})),z=function(e){function t(){var e,r;Object(T.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(S.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},r}return Object(_.a)(t,e),Object(N.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(I,null):this.props.children}}]),t}(n.Component),W=function(){function e(){Object(T.a)(this,e),this.data=[{id:1,title:"Metro 2033",author:"Dmitriy Gluhovskiy",price:6.36,category:"fantasy",img:"https://images2.medimops.eu/product/7a56c9/M03453529685-source.jpg"},{id:2,title:"Metro 2034",author:"Dmitriy Gluhovskiy",price:16.99,category:"post-apocalyptic",img:"https://images2.medimops.eu/product/230384/M03453316312-source.jpg"}]}return Object(N.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,r){setTimeout((function(){t(e.data)}),700)}))}}]),e}(),Z=r(23);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(r,!0).forEach((function(t){Object(Z.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=function(e,t){if(void 0===e)return{books:[],loading:!0,error:null};switch(t.type){case"BOOKS_REQUESTED":return te({},e,{books:[],loading:!0,error:null});case"BOOKS_LOADED":return te({},e,{books:t.payload,loading:!1,error:null});case"BOOKS_ERROR":return te({},e,{books:[],loading:!1,error:t.payload});default:return e.bookList}},ne=r(11),ae=function(e,t,r){var n=e.bookList.books,a=e.shoppingCart.cartItems,c=n.find((function(e){return t===e.id})),o=a.findIndex((function(e){return e.id===c.id})),i=a[o],l=function(e,t,r){return 0===t.count?[].concat(Object(ne.a)(e.slice(0,r)),Object(ne.a)(e.slice(r+1))):-1===r?[].concat(Object(ne.a)(e),[t]):[].concat(Object(ne.a)(e.slice(0,r)),[t],Object(ne.a)(e.slice(r+1)))}(a,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=t.id,a=void 0===n?e.id:n,c=t.count,o=void 0===c?0:c,i=t.title,l=void 0===i?e.title:i,u=t.total,s=void 0===u?0:u;return{id:a,title:l,count:o+r,total:+(s+r*e.price).toFixed(2)}}(c,i,r),o);return{cartItems:l,orderTotal:l.map((function(e){return e.total})).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+t}),0)}},ce=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"BOOK_ADDED_TO_CART":return ae(e,t.payload,1);case"BOOK_DECREASE_CART":return ae(e,t.payload,-1);case"BOOK_DELETED_FROM_CART":var r=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return ae(e,t.payload,-r.count);default:return e.shoppingCart}};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(r,!0).forEach((function(t){Object(Z.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=function(e,t){var r=e.filter.categories,n=r.findIndex((function(e){return e.id===t})),a=ue(r,n);return ie({},e.filter,{categories:a,checkedCategories:se(a)})},ue=function(e,t){var r=e[t],n=ie({},r,{checked:!r.checked});return[].concat(Object(ne.a)(e.slice(0,t)),[n],Object(ne.a)(e.slice(t+1)))},se=function(e){return e.filter((function(e){return!0===e.checked})).map((function(e){return{id:e.id,name:e.name}}))},me=function(e,t){if(void 0===e)return{searchTerm:"",categories:[{id:1,label:"Post-apocalyptic",name:"post-apocalyptic",checked:!1},{id:2,label:"Fantasy",name:"fantasy",checked:!1},{id:3,label:"Horror",name:"horror",checked:!1}],checkedCategories:[],maxPrice:100};switch(t.type){case"FORM_SUBMIT_SEARCH_TERM":return ie({},e.filter,{searchTerm:t.payload});case"CHECKBOX_CHANGE_STATUS":return le(e,t.payload);case"MAXPRICE_CHANGE_VALUE":return ie({},e.filter,{maxPrice:t.payload});default:return e.filter}},de=function(e,t){return{bookList:re(e,t),shoppingCart:ce(e,t),filter:me(e,t)}},fe=Object(s.b)(de),be=new W;o.a.render(a.a.createElement(i.a,{store:fe},a.a.createElement(z,null,a.a.createElement(P,{value:be},a.a.createElement(l.a,null,a.a.createElement(Y,null))))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.3814b326.chunk.js.map